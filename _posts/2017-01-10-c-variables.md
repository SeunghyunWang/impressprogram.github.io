---
layout: post
comments: true
title: C언어-변수들의 종류(지역변수,전역변수,register,static)
categories: [c]
tags: [c, programming-language]
fullview: true
---
# 지역변수와 전역변수
우선 지역변수와 전역변수에 대해서 알아봅시다.  
```
int main(int argc, const char * argv[]) {


    if(1){
        int a = 3;
        printf("%d", a);
    }

    printf("%d", a);


}
결과값 : error. 아래부분 printf에서 쓰인 a가 정의가 안됨.
```
if문 안에서 a를 정의해주었는데 왜 애러가 날까요?  
C언어에서는 중괄호를 기준으로 선언된 변수들은 지역변수라고 해서 해당 괄호 안에서만 쓸 수 있게 되기 때문입니다.  
이것이 바로 지역변수의 개념입니다(중괄호 안에서 선언된것은 중괄호 밖에서는 못씀).  
그렇다면 전역변수는 어떤놈일까요?  
```
#include <stdio.h>

int a = 10;

int main(int argc, const char * argv[]) {


    if(a==10){
        int a = 3;
        printf("%d,", a);
    }

    printf("%d", a);


}
결과값 : 3,10
```
위에 어떤 중괄호에도 속하지 않은 int a = 10; 부분이 바로 전역변수로 선언해 준 부분입니다.  
저런식으로 선언하면 어디에서나 접근할 수 있습니다.
위에 결과를 보시면 알겠지만 혹시 지역에서 a를 재정의 해준다면 해당 지역에서는 재정의한 a를 사용합니다.  
전역변수를 많이 사용하면 프로그램의 구조가 복잡해지므로 최대한 사용을 자제하는 것이 좋습니다.  

자, 그리고 지역변수와 전역변수의 중간정도되는 static으로 선언해주는 방법이 있습니다.  
메모리에 정보는 남지만 접근은 해당 지역에서만 가능합니다.  
예제를 통해 살펴보도록 하겠습니다.  
```
#include <stdio.h>

void ForFunc(void){
    int num = 0;
    static int stat = 0; //사실은 존재하지 않는 것!
    num++;
    stat++;
    printf("static : %d , local : %d", stat, num);
}

int main(int argc, const char * argv[]) {

    int i = 0;
    for(i=0; i<3; i++){
        ForFunc();
    }

    return 0;
}
```
결과값을 살펴보면 stat변수는 1, 2, 3이 찍히지만 num변수는 1, 1, 1이 찍힙니다.  
함수를 3번 호출하는데 호출할때마다 0으로 초기화를 해줘서 1, 1, 1이 찍힐것 같은데 신기하죠?  
static으로 선언되면 사실 저 위치에 없는 것과 마찬가지로 취급되기 때문입니다.  
전역변수처럼 프로그램 시작과 동시에 할당 및 초기화되어서 프로그램이 종료될 때까지 메모리 공간에 남아있습니다.  
전역변수와 다른점은 선언된 지역에서만 접근할 수 있다는 점입니다.  

# register 변수는 무엇일까?
```
int Simple(void){
  register int num = 3;
}
```
위와 같이 선언이 되면 변수 num은 CPU 내에 존재하는 '레지스터'라는 메모리 공간에 저장될 확률이 높아집니다.  
레지스터는 CPU내에 존재하는 그 크기가 매우 작은 메모리 입니다.  
하지만 CPU내에 존재하기 때문에 연산속도는 매우 빠릅니다.  
우리가 register로 선언해도 무조건 레지스터에 저장하는 것은 아니고 컴파일러가 합당하지 않다고 판단하면 컴파일러에 저장시키지 앖습니다.  
예를들어 전역변수의 경우에는 레지스터는 하나의 변수가 죽치고 자리하기엔 너무나도 중요하고 비싼 메모리 공간이기 때문에 register 선언을 해봤자 의미가 없습니다(컴파일러가 알아서 걸러요).  
